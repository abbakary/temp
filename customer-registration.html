<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Customer & Order Tracking System">
    <meta name="keywords" content="tracking, customer management, order management">
    <meta name="author" content="Tracking App">
    <link rel="icon" href="../assets/images/favicon.png" type="image/x-icon">
    <link rel="shortcut icon" href="../assets/images/favicon.png" type="image/x-icon">
    <title>Tracking System - Customer Registration</title>
    <!-- Google font-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../assets/css/font-awesome.css">
    <!-- ico-font-->
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/icofont.css">
    <!-- Themify icon-->
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/themify.css">
    <!-- Flag icon-->
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/flag-icon.css">
    <!-- Feather icon-->
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/feather-icon.css">
    <!-- Plugins css start-->
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/slick.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/slick-theme.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/scrollbar.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/animate.css">
    <!-- Plugins css Ends-->
    <!-- Bootstrap css-->
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/bootstrap.css">
    <!-- App css-->
    <link rel="stylesheet" type="text/css" href="../assets/css/style.css">
    <link id="color" rel="stylesheet" href="../assets/css/color-1.css" media="screen">
    <!-- Responsive css-->
    <link rel="stylesheet" type="text/css" href="../assets/css/responsive.css">
    
    <!-- Custom Styles for Registration Page -->
    <style>
      .registration-container {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        border: 1px solid #e9ecef;
      }
      
      .progress-bar-container {
        margin-bottom: 30px;
      }
      
      .progress-bar {
        background-color: #667eea;
      }
      
      .step-content {
        display: none;
      }
      
      .step-content.active {
        display: block;
        animation: fadeIn 0.5s;
      }
      
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      .step-title {
        font-size: 1.5em;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 25px;
      }
      
      .form-label {
        font-weight: 500;
        color: #495057;
      }
      
      .form-control, .form-select {
        border-radius: 8px;
        border: 1px solid #ced4da;
        padding: 10px 15px;
      }
      
      .form-control:focus, .form-select:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 0.25rem rgba(102, 126, 234, 0.25);
      }
      
      .step-buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 30px;
      }
      
      .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
      }

      .service-intent-card {
        border: 1px solid #e9ecef;
        border-radius: 10px;
        padding: 20px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .service-intent-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
      }

      .service-intent-card.selected {
        border-color: #667eea;
        background-color: rgba(102, 126, 234, 0.05);
      }

      .service-intent-card i {
        font-size: 2.5rem;
        margin-bottom: 15px;
        color: #667eea;
      }

      .invalid-feedback {
        display: none;
        color: #dc3545;
        font-size: 0.875em;
        margin-top: 0.25rem;
      }
      
      .form-control.is-invalid, .form-select.is-invalid {
        border-color: #dc3545;
      }
      
      .form-control.is-invalid ~ .invalid-feedback,
      .form-select.is-invalid ~ .invalid-feedback {
        display: block;
      }

      #organizationFields, #personalFields {
        display: none;
      }
    </style>
  </head>
  <body> 
    <!-- loader starts-->
    <div class="loader-wrapper">
      <div class="loader"> 
        <div class="loader4"></div>
      </div>
    </div>
    <!-- loader ends-->
    <!-- tap on top starts-->
    <div class="tap-top"><i data-feather="chevrons-up"></i></div>
    <!-- tap on tap ends-->
    <!-- page-wrapper Start-->
    <div class="page-wrapper compact-wrapper" id="pageWrapper">
      <!-- Page Header Start-->
      <div class="page-header">
        <div class="header-wrapper row m-0">
          <form class="form-inline search-full col" action="#" method="get">
            <div class="form-group w-100">
              <div class="Typeahead Typeahead--twitterUsers">
                <div class="u-posRelative"> 
                  <input class="demo-input Typeahead-input form-control-plaintext w-100" type="text" placeholder="Search customers, orders..." name="q" title="" autofocus>
                  <div class="spinner-border Typeahead-spinner" role="status"><span class="sr-only">Loading... </span></div><i class="close-search" data-feather="x"></i>
                </div>
                <div class="Typeahead-menu"> </div>
              </div>
            </div>
          </form>
          <div class="header-logo-wrapper col-auto p-0">  
            <div class="logo-wrapper"> <a href="index.html"><img class="img-fluid for-light" src="../assets/images/logo/logo_dark.png" alt="logo-light"><img class="img-fluid for-dark" src="../assets/images/logo/logo.png" alt="logo-dark"></a></div>
            <div class="toggle-sidebar"> <i class="status_toggle middle sidebar-toggle" data-feather="align-center"></i></div>
          </div>
          <div class="left-header col-xxl-5 col-xl-6 col-lg-5 col-md-4 col-sm-3 p-0">
            <div> <a class="toggle-sidebar" href="#"> <i class="iconly-Category icli"> </i></a>
              <div class="d-flex align-items-center gap-2 ">
                <h4 class="f-w-600"></h4>
              </div>
            </div>
            <div class="welcome-content d-xl-block d-none"><span class="text-truncate col-12"></span></div>
          </div>
          <div class="nav-right col-xxl-7 col-xl-6 col-md-7 col-8 pull-right right-header p-0 ms-auto">
            <ul class="nav-menus"> 
              <li class="d-md-block d-none"> 
                <div class="form search-form mb-0">
                  <div class="input-group"><span class="input-icon">
                      <svg>
                        <use href="../assets/svg/icon-sprite.svg#search-header"></use>
                      </svg>
                      <input class="w-100" type="search" placeholder="Search customers, orders..." id="headerSearch"></span></div>
                </div>
              </li>
              <li> 
                <div class="mode"><i class="moon" data-feather="moon"> </i></div>
              </li>
              <li class="onhover-dropdown notification-down">
                <div class="notification-box"> 
                  <svg> 
                    <use href="../assets/svg/icon-sprite.svg#notification-header"></use>
                  </svg><span class="badge rounded-pill badge-secondary" id="notificationCount">0</span>
                </div>
                <div class="onhover-show-div notification-dropdown"> 
                  <div class="card mb-0"> 
                    <div class="card-header">
                      <div class="common-space"> 
                        <h4 class="text-start f-w-600">Notifications</h4>
                        <div><span id="notificationNew">0 New</span></div>
                      </div>
                    </div>
                    <div class="card-body" id="notificationList">
                      <!-- Notifications will be populated here -->
                    </div>
                  </div>
                </div>
              </li>
              <li class="profile-nav onhover-dropdown pe-0 py-0">
                <div class="media profile-media"> <img class="b-r-10" src="../assets/images/dashboard/profile.png" alt="">
                  <div class="media-body"> <span>Manager</span>
                    <p class="mb-0">Admin <i class="middle fa fa-angle-down"> </i></p>
                  </div>
                </div>
                <ul class="profile-dropdown onhover-show-div">
                  <li><a href="#"><i data-feather="user"></i><span>Account </span></a></li>
                  <li><a href="#"><i data-feather="settings"></i><span>Settings</span></a></li>
                  <li><a href="#"><i data-feather="log-in"> </i><span>Log out</span></a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Page Header Ends -->
      <!-- Page Body Start-->
      <div class="page-body-wrapper">
        <!-- Page Sidebar Start-->
        <div class="sidebar-wrapper" sidebar-layout="stroke-svg">
          <div>
            <div class="logo-wrapper"> <a href="index.html"><img class="img-fluid" src="../assets/images/logo/logo.png" alt=""></a>
              <div class="toggle-sidebar"><i class="status_toggle middle sidebar-toggle" data-feather="grid"> </i></div>
            </div>
            <div class="logo-icon-wrapper"><a href="index.html"><img class="img-fluid" src="../assets/images/logo/logo-icon.png" alt=""></a></div>
            <nav class="sidebar-main">
              <div class="left-arrow" id="left-arrow"><i data-feather="arrow-left"></i></div>
              <div id="sidebar-menu">
                <ul class="sidebar-links" id="simple-bar">
                  <li class="back-btn"><a href="index.html"><img class="img-fluid" src="../assets/images/logo/logo-icon.png" alt=""></a>
                    <div class="mobile-back text-end"><span>Back</span><i class="fa fa-angle-right ps-2" aria-hidden="true"></i></div>
                  </li>
                  <li class="pin-title sidebar-main-title">
                    <div> 
                      <h6>Tracking System</h6>
                    </div>
                  </li>
                  <li class="sidebar-main-title">
                    <div>
                      <h6 class="lan-1">Main Menu</h6>
                    </div>
                  </li>
                  <li class="sidebar-list">
                    <a class="sidebar-link sidebar-title link-nav" href="index.html">
                      <svg class="stroke-icon">
                        <use href="../assets/svg/icon-sprite.svg#stroke-home"></use>
                      </svg>
                      <span>Dashboard</span>
                    </a>
                  </li>
                  <li class="sidebar-list">
                    <a class="sidebar-link sidebar-title active" href="#">
                      <svg class="stroke-icon">
                        <use href="../assets/svg/icon-sprite.svg#stroke-user"></use>
                      </svg>
                      <span>Customers</span>
                    </a>
                    <ul class="sidebar-submenu">
                      <li><a href="customer-registration.html" class="active">New Registration</a></li>
                      <li><a href="customer-list.html">View All</a></li>
                      <li><a href="customer-search.html">Search Customer</a></li>
                    </ul>
                  </li>
                  <li class="sidebar-list">
                    <a class="sidebar-link sidebar-title" href="#">
                      <svg class="stroke-icon">
                        <use href="../assets/svg/icon-sprite.svg#stroke-board"></use>
                      </svg>
                      <span>Orders</span>
                    </a>
                    <ul class="sidebar-submenu">
                      <li><a href="order-create.html">Create Order</a></li>
                      <li><a href="order-list.html">View All Orders</a></li>
                      <li><a href="order-tracking.html">Track Orders</a></li>
                    </ul>
                  </li>
                  <li class="sidebar-list">
                    <a class="sidebar-link sidebar-title" href="#">
                      <svg class="stroke-icon">
                        <use href="../assets/svg/icon-sprite.svg#stroke-charts"></use>
                      </svg>
                      <span>Analytics</span>
                    </a>
                    <ul class="sidebar-submenu">
                      <li><a href="analytics-overview.html">Overview</a></li>
                      <li><a href="analytics-performance.html">Performance Metrics</a></li>
                      <li><a href="analytics-customer.html">Customer Analytics</a></li>
                      <li><a href="analytics-service.html">Service Analytics</a></li>
                      <li><a href="analytics-revenue.html">Revenue Analysis</a></li>
                    </ul>
                  </li>
                  <li class="sidebar-list">
                    <a class="sidebar-link sidebar-title" href="#">
                      <svg class="stroke-icon">
                        <use href="../assets/svg/icon-sprite.svg#stroke-file"></use>
                      </svg>
                      <span>Reports</span>
                    </a>
                    <ul class="sidebar-submenu">
                      <li><a href="reports-daily.html">Daily Reports</a></li>
                      <li><a href="reports-customer.html">Customer Reports</a></li>
                      <li><a href="reports-service.html">Service Reports</a></li>
                      <li><a href="reports-financial.html">Financial Reports</a></li>
                      <li><a href="reports-custom.html">Custom Reports</a></li>
                    </ul>
                  </li>
                  <li class="sidebar-main-title">
                    <div>
                      <h6 class="lan-1">System</h6>
                    </div>
                  </li>
                  <li class="sidebar-list">
                    <a class="sidebar-link sidebar-title" href="#">
                      <svg class="stroke-icon">
                        <use href="../assets/svg/icon-sprite.svg#stroke-setting"></use>
                      </svg>
                      <span>Settings</span>
                    </a>
                    <ul class="sidebar-submenu">
                      <li><a href="settings-general.html">General Settings</a></li>
                      <li><a href="settings-services.html">Service Configuration</a></li>
                      <li><a href="settings-users.html">User Management</a></li>
                      <li><a href="settings-backup.html">Backup & Restore</a></li>
                    </ul>
                  </li>
                </ul>
              </div>
              <div class="right-arrow" id="right-arrow"><i data-feather="arrow-right"></i></div>
            </nav>
          </div>
        </div>
        <!-- Page Sidebar Ends-->
        <div class="page-body">
          <div class="container-fluid">
            <div class="page-title">
              <div class="row">
                <div class="col-sm-6 ps-0">
                  <h3>New Customer Registration</h3>
                  <div class="welcome-text mt-2">
                    <p class="text-muted mb-0">Follow the steps to register a new customer</p>
                  </div>
                </div>
                <div class="col-sm-6 pe-0">
                  <ol class="breadcrumb mt-2 justify-content-end">
                    <li class="breadcrumb-item"><a href="index.html">
                        <svg class="stroke-icon">
                          <use href="../assets/svg/icon-sprite.svg#stroke-home"></use>
                        </svg></a></li>
                    <li class="breadcrumb-item"><a href="#">Customers</a></li>
                    <li class="breadcrumb-item active">New Registration</li>
                  </ol>
                </div>
              </div>
            </div>
          </div>
          <!-- Container-fluid starts-->
          <div class="container-fluid">
            <div class="registration-container">
              <div class="progress-bar-container">
                <div class="progress">
                  <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" id="registrationProgressBar">Step 1 of 4</div>
                </div>
              </div>

              <form id="registrationForm" novalidate>
                <!-- Step 1: Basic Information -->
                <div id="step1" class="step-content active">
                  <h4 class="step-title">Step 1: Basic Customer Information</h4>
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="fullName" class="form-label">Full Name</label>
                      <input type="text" class="form-control" id="fullName" required>
                      <div class="invalid-feedback">Please enter a full name.</div>
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="phoneNumber" class="form-label">Phone Number</label>
                      <input type="tel" class="form-control" id="phoneNumber" placeholder="+255 xxx xxx xxx" required>
                      <div class="invalid-feedback">Please enter a valid phone number.</div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label for="emailAddress" class="form-label">Email Address (Optional)</label>
                      <input type="email" class="form-control" id="emailAddress">
                    </div>
                    <div class="col-md-6 mb-3">
                      <label for="address" class="form-label">Address (Optional)</label>
                      <textarea class="form-control" id="address" rows="1"></textarea>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12 mb-3">
                      <label for="notes" class="form-label">Notes (Optional)</label>
                      <textarea class="form-control" id="notes" rows="3" placeholder="Additional customer information..."></textarea>
                    </div>
                  </div>
                  <div class="step-buttons">
                    <button type="button" class="btn btn-primary" id="nextToStep2">Next <i data-feather="arrow-right" class="ms-2"></i></button>
                  </div>
                </div>

                <!-- Step 2: Service Intent -->
                <div id="step2" class="step-content">
                  <h4 class="step-title">Step 2: Service Intent</h4>
                  <div class="row justify-content-center">
                    <div class="col-md-5 mb-3">
                      <div class="service-intent-card" data-intent="service">
                        <i data-feather="tool"></i>
                        <h5>I need a service</h5>
                        <p>For car services or tire sales.</p>
                      </div>
                    </div>
                    <div class="col-md-5 mb-3">
                      <div class="service-intent-card" data-intent="inquiry">
                        <i data-feather="help-circle"></i>
                        <h5>Just an inquiry</h5>
                        <p>For questions and consultations.</p>
                      </div>
                    </div>
                  </div>
                  <input type="hidden" id="serviceIntent" required>
                  <div class="invalid-feedback" id="serviceIntentFeedback">Please select an intent.</div>
                  <div class="step-buttons">
                    <button type="button" class="btn btn-outline-secondary prev-btn" data-target="step1"><i data-feather="arrow-left" class="me-2"></i>Previous</button>
                    <button type="button" class="btn btn-primary" id="nextToStep3">Next <i data-feather="arrow-right" class="ms-2"></i></button>
                  </div>
                </div>

                <!-- Step 3: Service Type -->
                <div id="step3" class="step-content">
                  <h4 class="step-title">Step 3: Service Type</h4>
                  <div class="row justify-content-center">
                    <div class="col-md-5 mb-3">
                      <div class="service-intent-card" data-service-type="tire-sales">
                        <i data-feather="circle"></i>
                        <h5>Tire Sales</h5>
                        <p>Sales and wheel services.</p>
                      </div>
                    </div>
                    <div class="col-md-5 mb-3">
                      <div class="service-intent-card" data-service-type="car-service">
                        <i data-feather="settings"></i>
                        <h5>Car Service</h5>
                        <p>Maintenance and repairs.</p>
                      </div>
                    </div>
                  </div>
                  <input type="hidden" id="serviceType" required>
                  <div class="invalid-feedback" id="serviceTypeFeedback">Please select a service type.</div>
                  <div class="step-buttons">
                    <button type="button" class="btn btn-outline-secondary prev-btn" data-target="step2"><i data-feather="arrow-left" class="me-2"></i>Previous</button>
                    <button type="button" class="btn btn-primary" id="nextToStep4">Next <i data-feather="arrow-right" class="ms-2"></i></button>
                  </div>
                </div>

                <!-- Step 4: Details & Review -->
                <div id="step4" class="step-content">
                  <h4 class="step-title">Step 4: Details & Review</h4>
                  <div class="mb-3">
                    <label for="customerType" class="form-label">Customer Type</label>
                    <select class="form-select" id="customerType" required>
                      <option value="">Select customer type...</option>
                      <option value="personal">Personal</option>
                      <option value="bodaboda">Bodaboda</option>
                      <option value="government">Government</option>
                      <option value="ngo">NGO</option>
                      <option value="private-company">Private Company</option>
                    </select>
                    <div class="invalid-feedback">Please select a customer type.</div>
                  </div>

                  <div id="organizationFields">
                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="organizationName" class="form-label">Organization Name</label>
                        <input type="text" class="form-control" id="organizationName">
                        <div class="invalid-feedback">Organization name is required.</div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="taxNumber" class="form-label">Tax Number</label>
                        <input type="text" class="form-control" id="taxNumber">
                        <div class="invalid-feedback">Tax number is required.</div>
                      </div>
                    </div>
                  </div>

                  <div id="personalFields">
                     <label class="form-label">Sub-type</label>
                     <div class="d-flex gap-3">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="personalSubType" id="owner" value="owner" checked>
                            <label class="form-check-label" for="owner">Owner</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="personalSubType" id="driver" value="driver">
                            <label class="form-check-label" for="driver">Driver</label>
                        </div>
                     </div>
                  </div>

                  <div class="step-buttons">
                    <button type="button" class="btn btn-outline-secondary prev-btn" data-target="step2" id="prevFromStep4"><i data-feather="arrow-left" class="me-2"></i>Previous</button>
                    <button type="submit" class="btn btn-primary">Complete Registration</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <!-- Container-fluid Ends-->
        </div>
        <!-- footer start-->
        <footer class="footer">
          <div class="container-fluid">
            <div class="row">
              <div class="col-md-12 footer-copyright text-center">
                <p class="mb-0">Copyright 2024 © Tracking System All rights reserved.</p>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>
    <!-- latest jquery-->
    <script src="../assets/js/jquery.min.js"></script>
    <!-- Bootstrap js-->
    <script src="../assets/js/bootstrap/bootstrap.bundle.min.js"></script>
    <!-- feather icon js-->
    <script src="../assets/js/icons/feather-icon/feather.min.js"></script>
    <script src="../assets/js/icons/feather-icon/feather-icon.js"></script>
    <!-- scrollbar js-->
    <script src="../assets/js/scrollbar/simplebar.js"></script>
    <script src="../assets/js/scrollbar/custom.js"></script>
    <!-- Sidebar jquery-->
    <script src="../assets/js/config.js"></script>
    <!-- Plugins JS start-->
    <script src="../assets/js/sidebar-menu.js"></script>
    <script src="../assets/js/sidebar-pin.js"></script>
    <script src="../assets/js/slick/slick.min.js"></script>
    <script src="../assets/js/slick/slick.js"></script>
    <script src="../assets/js/header-slick.js"></script>
    <!-- Plugins JS Ends-->
    <!-- Theme js-->
    <script src="../assets/js/script.js"></script>
    <!-- Tracking System Core -->
    <script src="tracking-system.js"></script>
    <!-- Error Handling Utilities -->
    <script src="error-handling.js"></script>
    <!-- Registration Page Script -->
    <script>
      $(document).ready(function() {
        let currentStep = 1;
        const totalSteps = 4;

        function goToStep(step) {
            $('.step-content').removeClass('active');
            $('#step' + step).addClass('active');
            
            const progress = (step / totalSteps) * 100;
            $('#registrationProgressBar').css('width', progress + '%').text(`Step ${step} of ${totalSteps}`);
            
            currentStep = step;
        }

        function validateStep(step) {
            let isValid = true;
            $(`#step${step} [required]`).each(function() {
                const feedbackEl = $(this).siblings('.invalid-feedback');
                if (!$(this).val()) {
                    $(this).addClass('is-invalid');
                    if (feedbackEl.length) {
                        feedbackEl.text(`Please fill out this field.`).show();
                    }
                    isValid = false;
                } else {
                    $(this).removeClass('is-invalid');
                    if (feedbackEl.length) {
                        feedbackEl.hide();
                    }
                }
            });
            return isValid;
        }

        $('#nextToStep2').on('click', function() {
            if (validateStep(1)) {
                goToStep(2);
            }
        });

        $('.service-intent-card').on('click', function() {
            $('.service-intent-card').removeClass('selected');
            $(this).addClass('selected');
            $('#serviceIntent').val($(this).data('intent')).removeClass('is-invalid').siblings('.invalid-feedback').hide();
        });

        $('#nextToStep3').on('click', function() {
            const intent = $('#serviceIntent').val();
            if (!intent) {
                $('#serviceIntentFeedback').text('Please select an intent.').show();
                return;
            }

            if (intent === 'service') {
                $('#step3').show();
                goToStep(3);
            } else { // Inquiry
                $('#step3').hide();
                goToStep(4);
            }
        });

        $('#step3 .service-intent-card').on('click', function() {
            $('#step3 .service-intent-card').removeClass('selected');
            $(this).addClass('selected');
            $('#serviceType').val($(this).data('service-type')).removeClass('is-invalid').siblings('.invalid-feedback').hide();
        });

        $('#nextToStep4').on('click', function() {
            if (!$('#serviceType').val()) {
                $('#serviceTypeFeedback').text('Please select a service type.').show();
                return;
            }
            goToStep(4);
        });

        $('.prev-btn').on('click', function() {
            const targetStep = $(this).data('target').replace('step', '');
            goToStep(parseInt(targetStep));
        });

        $('#customerType').on('change', function() {
            const type = $(this).val();
            const orgFields = ['government', 'ngo', 'private-company'];
            if (orgFields.includes(type)) {
                $('#organizationFields').show();
                $('#personalFields').hide();
                $('#organizationName, #taxNumber').prop('required', true);
            } else if (type === 'personal') {
                $('#organizationFields').hide();
                $('#personalFields').show();
                $('#organizationName, #taxNumber').prop('required', false);
            } else {
                $('#organizationFields').hide();
                $('#personalFields').hide();
                $('#organizationName, #taxNumber').prop('required', false);
            }
        });

        $('#registrationForm').on('submit', function(e) {
            e.preventDefault();
            if (validateStep(4)) {
                // Collect data and submit
                const formData = {
                    fullName: $('#fullName').val(),
                    phoneNumber: $('#phoneNumber').val(),
                    email: $('#emailAddress').val(),
                    address: $('#address').val(),
                    notes: $('#notes').val(),
                    serviceIntent: $('#serviceIntent').val(),
                    serviceType: $('#serviceType').val(),
                    customerType: $('#customerType').val(),
                    organizationName: $('#organizationName').val(),
                    taxNumber: $('#taxNumber').val(),
                    personalSubType: $('input[name="personalSubType"]:checked').val()
                };

                console.log('Form Submitted:', formData);
                // Here you would typically send the data to your server
                alert('Customer registered successfully! Check console for data.');
                // Redirect or show success message
                window.location.href = 'customer-list.html';
            }
        });

      });
    </script>
  </body>
</html>