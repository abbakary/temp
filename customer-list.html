<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Customer & Order Tracking System">
    <meta name="keywords" content="tracking, customer management, order management">
    <meta name="author" content="Tracking App">
    <link rel="icon" href="../assets/images/favicon.png" type="image/x-icon">
    <link rel="shortcut icon" href="../assets/images/favicon.png" type="image/x-icon">
    <title>Tracking System - Customer List</title>
    <!-- Google font-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../assets/css/font-awesome.css">
    <!-- ico-font-->
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/icofont.css">
    <!-- Themify icon-->
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/themify.css">
    <!-- Flag icon-->
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/flag-icon.css">
    <!-- Feather icon-->
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/feather-icon.css">
    <!-- Plugins css start-->
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/slick.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/slick-theme.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/scrollbar.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/animate.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/datatables.css">
    <!-- Plugins css Ends-->
    <!-- Bootstrap css-->
    <link rel="stylesheet" type="text/css" href="../assets/css/vendors/bootstrap.css">
    <!-- App css-->
    <link rel="stylesheet" type="text/css" href="../assets/css/style.css">
    <link id="color" rel="stylesheet" href="../assets/css/color-1.css" media="screen">
    <!-- Responsive css-->
    <link rel="stylesheet" type="text/css" href="../assets/css/responsive.css">
    
    <!-- Custom Styles for Customer List Page -->
    <style>
      .stats-card {
        background: white;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        border: 1px solid #e9ecef;
        transition: all 0.3s ease;
      }
      
      .stats-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      }
      
      .stats-card h3 {
        font-size: 1.75rem;
        font-weight: 700;
        margin-bottom: 5px;
      }
      
      .stats-card p {
        color: #6c757d;
        margin-bottom: 0;
      }
      
      .stats-card i {
        font-size: 2rem;
        opacity: 0.7;
      }
      
      .filter-section {
        background: white;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        border: 1px solid #e9ecef;
      }
      
      .filter-section h4 {
        margin-bottom: 15px;
        color: #2c3e50;
      }
      
      .customer-actions {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }
      
      .customer-actions .btn {
        padding: 8px 15px;
        border-radius: 8px;
        font-weight: 500;
      }
      
      .customer-table-container {
        background: white;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        border: 1px solid #e9ecef;
      }
      
      .customer-table-container h4 {
        margin-bottom: 15px;
        color: #2c3e50;
      }
      
      .table thead th {
        border-bottom: 2px solid #e9ecef;
        color: #2c3e50;
        font-weight: 600;
      }
      
      .table tbody tr:hover {
        background-color: rgba(102, 126, 234, 0.05);
      }
      
      .status-badge {
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.8em;
        font-weight: 600;
      }
      
      .status-active {
        background-color: rgba(40, 167, 69, 0.1);
        color: #28a745;
      }
      
      .status-inactive {
        background-color: rgba(220, 53, 69, 0.1);
        color: #dc3545;
      }
      
      .status-organization {
        background-color: rgba(23, 162, 184, 0.1);
        color: #17a2b8;
      }
      
      .action-buttons .btn {
        padding: 5px 8px;
        margin: 0 2px;
        border-radius: 5px;
      }
      
      .customer-detail-modal .modal-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 15px 15px 0 0;
      }
      
      .customer-detail-modal .modal-content {
        border-radius: 15px;
        border: none;
      }
      
      .customer-detail-modal .modal-body {
        padding: 20px;
      }
      
      .customer-detail-section {
        margin-bottom: 20px;
      }
      
      .customer-detail-section h5 {
        color: #2c3e50;
        margin-bottom: 10px;
        padding-bottom: 5px;
        border-bottom: 1px solid #e9ecef;
      }
      
      .vehicle-card {
        border: 1px solid #e9ecef;
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 15px;
      }
      
      .vehicle-card h6 {
        color: #2c3e50;
        margin-bottom: 10px;
      }
      
      .order-history-item {
        border-bottom: 1px solid #e9ecef;
        padding: 10px 0;
      }
      
      .order-history-item:last-child {
        border-bottom: none;
      }
      
      .order-history-item h6 {
        color: #2c3e50;
        margin-bottom: 5px;
      }
      
      .order-history-item p {
        margin-bottom: 0;
        color: #6c757d;
        font-size: 0.9em;
      }
      
      @media (max-width: 768px) {
        .customer-actions {
          flex-wrap: wrap;
        }
        
        .customer-actions .btn {
          flex: 1 1 100%;
        }
      }
    </style>
  </head>
  <body> 
    <!-- loader starts-->
    <div class="loader-wrapper">
      <div class="loader"> 
        <div class="loader4"></div>
      </div>
    </div>
    <!-- loader ends-->
    <!-- tap on top starts-->
    <div class="tap-top"><i data-feather="chevrons-up"></i></div>
    <!-- tap on tap ends-->
    <!-- page-wrapper Start-->
    <div class="page-wrapper compact-wrapper" id="pageWrapper">
      <!-- Page Header Start-->
      <div class="page-header">
        <div class="header-wrapper row m-0">
          <form class="form-inline search-full col" action="#" method="get">
            <div class="form-group w-100">
              <div class="Typeahead Typeahead--twitterUsers">
                <div class="u-posRelative"> 
                  <input class="demo-input Typeahead-input form-control-plaintext w-100" type="text" placeholder="Search customers, orders..." name="q" title="" autofocus>
                  <div class="spinner-border Typeahead-spinner" role="status"><span class="sr-only">Loading... </span></div><i class="close-search" data-feather="x"></i>
                </div>
                <div class="Typeahead-menu"> </div>
              </div>
            </div>
          </form>
          <div class="header-logo-wrapper col-auto p-0">  
            <div class="logo-wrapper"> <a href="index.html"><img class="img-fluid for-light" src="../assets/images/logo/logo_dark.png" alt="logo-light"><img class="img-fluid for-dark" src="../assets/images/logo/logo.png" alt="logo-dark"></a></div>
            <div class="toggle-sidebar"> <i class="status_toggle middle sidebar-toggle" data-feather="align-center"></i></div>
          </div>
          <div class="left-header col-xxl-5 col-xl-6 col-lg-5 col-md-4 col-sm-3 p-0">
            <div> <a class="toggle-sidebar" href="#"> <i class="iconly-Category icli"> </i></a>
              <div class="d-flex align-items-center gap-2 ">
                <h4 class="f-w-600">Customer List</h4>
              </div>
            </div>
            <div class="welcome-content d-xl-block d-none"><span class="text-truncate col-12">Manage all customer information and status</span></div>
          </div>
          <div class="nav-right col-xxl-7 col-xl-6 col-md-7 col-8 pull-right right-header p-0 ms-auto">
            <ul class="nav-menus"> 
              <li class="d-md-block d-none"> 
                <div class="form search-form mb-0">
                  <div class="input-group"><span class="input-icon">
                      <svg>
                        <use href="../assets/svg/icon-sprite.svg#search-header"></use>
                      </svg>
                      <input class="w-100" type="search" placeholder="Search customers, orders..." id="headerSearch"></span></div>
                </div>
              </li>
              <li> 
                <div class="mode"><i class="moon" data-feather="moon"> </i></div>
              </li>
              <li class="onhover-dropdown notification-down">
                <div class="notification-box"> 
                  <svg> 
                    <use href="../assets/svg/icon-sprite.svg#notification-header"></use>
                  </svg><span class="badge rounded-pill badge-secondary" id="notificationCount">0</span>
                </div>
                <div class="onhover-show-div notification-dropdown"> 
                  <div class="card mb-0"> 
                    <div class="card-header">
                      <div class="common-space"> 
                        <h4 class="text-start f-w-600">Notifications</h4>
                        <div><span id="notificationNew">0 New</span></div>
                      </div>
                    </div>
                    <div class="card-body" id="notificationList">
                      <!-- Notifications will be populated here -->
                    </div>
                  </div>
                </div>
              </li>
              <li class="profile-nav onhover-dropdown pe-0 py-0">
                <div class="media profile-media"> <img class="b-r-10" src="../assets/images/dashboard/profile.png" alt="">
                  <div class="media-body"> <span>Manager</span>
                    <p class="mb-0">Admin <i class="middle fa fa-angle-down"> </i></p>
                  </div>
                </div>
                <ul class="profile-dropdown onhover-show-div">
                  <li><a href="#"><i data-feather="user"></i><span>Account </span></a></li>
                  <li><a href="#"><i data-feather="settings"></i><span>Settings</span></a></li>
                  <li><a href="#"><i data-feather="log-in"> </i><span>Log out</span></a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Page Header Ends -->
      <!-- Page Body Start-->
      <div class="page-body-wrapper">
        <!-- Page Sidebar Start-->
        <div class="sidebar-wrapper" sidebar-layout="stroke-svg">
          <div>
            <div class="logo-wrapper"> <a href="index.html"><img class="img-fluid" src="../assets/images/logo/logo.png" alt=""></a>
              <div class="toggle-sidebar"><i class="status_toggle middle sidebar-toggle" data-feather="grid"> </i></div>
            </div>
            <div class="logo-icon-wrapper"><a href="index.html"><img class="img-fluid" src="../assets/images/logo/logo-icon.png" alt=""></a></div>
            <nav class="sidebar-main">
              <div class="left-arrow" id="left-arrow"><i data-feather="arrow-left"></i></div>
              <div id="sidebar-menu">
                <ul class="sidebar-links" id="simple-bar">
                  <li class="back-btn"><a href="index.html"><img class="img-fluid" src="../assets/images/logo/logo-icon.png" alt=""></a>
                    <div class="mobile-back text-end"><span>Back</span><i class="fa fa-angle-right ps-2" aria-hidden="true"></i></div>
                  </li>
                  <li class="pin-title sidebar-main-title">
                    <div> 
                      <h6>Tracking System</h6>
                    </div>
                  </li>
                  <li class="sidebar-main-title">
                    <div>
                      <h6 class="lan-1">Main Menu</h6>
                    </div>
                  </li>
                  <li class="sidebar-list">
                    <a class="sidebar-link sidebar-title link-nav" href="index.html">
                      <svg class="stroke-icon">
                        <use href="../assets/svg/icon-sprite.svg#stroke-home"></use>
                      </svg>
                      <span>Dashboard</span>
                    </a>
                  </li>
                  <li class="sidebar-list">
                    <a class="sidebar-link sidebar-title active" href="#">
                      <svg class="stroke-icon">
                        <use href="../assets/svg/icon-sprite.svg#stroke-user"></use>
                      </svg>
                      <span>Customers</span>
                    </a>
                    <ul class="sidebar-submenu">
                      <li><a href="customer-registration.html">New Registration</a></li>
                      <li><a href="customer-list.html" class="active">View All</a></li>
                      <li><a href="customer-search.html">Search Customer</a></li>
                    </ul>
                  </li>
                  <li class="sidebar-list">
                    <a class="sidebar-link sidebar-title" href="#">
                      <svg class="stroke-icon">
                        <use href="../assets/svg/icon-sprite.svg#stroke-board"></use>
                      </svg>
                      <span>Orders</span>
                    </a>
                    <ul class="sidebar-submenu">
                      <li><a href="order-create.html">Create Order</a></li>
                      <li><a href="order-list.html">View All Orders</a></li>
                      <li><a href="order-tracking.html">Track Orders</a></li>
                    </ul>
                  </li>
                  <li class="sidebar-list">
                    <a class="sidebar-link sidebar-title" href="#">
                      <svg class="stroke-icon">
                        <use href="../assets/svg/icon-sprite.svg#stroke-charts"></use>
                      </svg>
                      <span>Analytics</span>
                    </a>
                    <ul class="sidebar-submenu">
                      <li><a href="analytics-overview.html">Overview</a></li>
                      <li><a href="analytics-performance.html">Performance Metrics</a></li>
                      <li><a href="analytics-customer.html">Customer Analytics</a></li>
                      <li><a href="analytics-service.html">Service Analytics</a></li>
                      <li><a href="analytics-revenue.html">Revenue Analysis</a></li>
                    </ul>
                  </li>
                  <li class="sidebar-list">
                    <a class="sidebar-link sidebar-title" href="#">
                      <svg class="stroke-icon">
                        <use href="../assets/svg/icon-sprite.svg#stroke-file"></use>
                      </svg>
                      <span>Reports</span>
                    </a>
                    <ul class="sidebar-submenu">
                      <li><a href="reports-daily.html">Daily Reports</a></li>
                      <li><a href="reports-customer.html">Customer Reports</a></li>
                      <li><a href="reports-service.html">Service Reports</a></li>
                      <li><a href="reports-financial.html">Financial Reports</a></li>
                      <li><a href="reports-custom.html">Custom Reports</a></li>
                    </ul>
                  </li>
                  <li class="sidebar-main-title">
                    <div>
                      <h6 class="lan-1">System</h6>
                    </div>
                  </li>
                  <li class="sidebar-list">
                    <a class="sidebar-link sidebar-title" href="#">
                      <svg class="stroke-icon">
                        <use href="../assets/svg/icon-sprite.svg#stroke-setting"></use>
                      </svg>
                      <span>Settings</span>
                    </a>
                    <ul class="sidebar-submenu">
                      <li><a href="settings-general.html">General Settings</a></li>
                      <li><a href="settings-services.html">Service Configuration</a></li>
                      <li><a href="settings-users.html">User Management</a></li>
                      <li><a href="settings-backup.html">Backup & Restore</a></li>
                    </ul>
                  </li>
                </ul>
              </div>
              <div class="right-arrow" id="right-arrow"><i data-feather="arrow-right"></i></div>
            </nav>
          </div>
        </div>
        <!-- Page Sidebar Ends-->
        <div class="page-body">
          <div class="container-fluid">
            <div class="page-title">
              <div class="row">
                <div class="col-sm-6 ps-0">
                  <h3>Customer Management</h3>
                  <div class="welcome-text mt-2">
                    <p class="text-muted mb-0">Manage all customer information and status</p>
                  </div>
                </div>
                <div class="col-sm-6 pe-0">
                  <div class="d-flex align-items-center justify-content-end gap-3">
                    <div class="dashboard-actions">
                      <button class="btn btn-primary" onclick="window.location.href='customer-registration.html'">
                        <i data-feather="user-plus" class="me-2"></i>Add Customer
                      </button>
                      <button class="btn btn-outline-primary" onclick="exportCustomerData()">
                        <i data-feather="download" class="me-2"></i>Export
                      </button>
                    </div>
                  </div>
                  <ol class="breadcrumb mt-2">
                    <li class="breadcrumb-item"><a href="index.html">
                        <svg class="stroke-icon">
                          <use href="../assets/svg/icon-sprite.svg#stroke-home"></use>
                        </svg></a></li>
                    <li class="breadcrumb-item"><a href="#">Customers</a></li>
                    <li class="breadcrumb-item active">View All</li>
                  </ol>
                </div>
              </div>
            </div>
          </div>
          <!-- Container-fluid starts-->
          <div class="container-fluid">
            <!-- Stats Cards -->
            <div class="row">
              <div class="col-xl-3 col-md-6 col-sm-12">
                <div class="stats-card">
                  <div class="d-flex justify-content-between align-items-center">
                    <div>
                      <h3 id="totalCustomers">0</h3>
                      <p>Total Customers</p>
                    </div>
                    <i class="fas fa-users text-primary"></i>
                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-md-6 col-sm-12">
                <div class="stats-card">
                  <div class="d-flex justify-content-between align-items-center">
                    <div>
                      <h3 id="activeCustomers">0</h3>
                      <p>Active Customers</p>
                    </div>
                    <i class="fas fa-user-check text-success"></i>
                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-md-6 col-sm-12">
                <div class="stats-card">
                  <div class="d-flex justify-content-between align-items-center">
                    <div>
                      <h3 id="newCustomersThisMonth">0</h3>
                      <p>New This Month</p>
                    </div>
                    <i class="fas fa-user-plus text-info"></i>
                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-md-6 col-sm-12">
                <div class="stats-card">
                  <div class="d-flex justify-content-between align-items-center">
                    <div>
                      <h3 id="organizationCustomers">0</h3>
                      <p>Organizations</p>
                    </div>
                    <i class="fas fa-building text-warning"></i>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Filter Section -->
            <div class="filter-section">
              <h4>Filter Customers</h4>
              <div class="row">
                <div class="col-md-3 mb-3">
                  <label for="searchCustomer" class="form-label">Search</label>
                  <div class="input-group">
                    <input type="text" class="form-control" id="searchCustomer" placeholder="Search by name, email, or phone">
                    <button class="btn btn-outline-secondary" type="button" id="searchCustomerBtn">
                      <i data-feather="search"></i>
                    </button>
                  </div>
                </div>
                <div class="col-md-3 mb-3">
                  <label for="filterStatus" class="form-label">Status</label>
                  <select class="form-select" id="filterStatus">
                    <option value="">All Statuses</option>
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                    <option value="organization">Organization</option>
                  </select>
                </div>
                <div class="col-md-3 mb-3">
                  <label for="filterCustomerType" class="form-label">Customer Type</label>
                  <select class="form-select" id="filterCustomerType">
                    <option value="">All Types</option>
                    <option value="government">Government</option>
                    <option value="ngo">NGO</option>
                    <option value="private-company">Private Company</option>
                    <option value="personal">Personal</option>
                    <option value="bodaboda">Bodaboda</option>
                  </select>
                </div>
                <div class="col-md-3 mb-3">
                  <label for="filterDateRange" class="form-label">Date Range</label>
                  <select class="form-select" id="filterDateRange">
                    <option value="">All Time</option>
                    <option value="today">Today</option>
                    <option value="week">This Week</option>
                    <option value="month">This Month</option>
                    <option value="year">This Year</option>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <button class="btn btn-primary" id="applyFiltersBtn">Apply Filters</button>
                  <button class="btn btn-outline-secondary" id="resetFiltersBtn">Reset Filters</button>
                </div>
              </div>
            </div>
            
            <!-- Customer Table -->
            <div class="customer-table-container">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h4>Customer List</h4>
                <div class="d-flex gap-2">
                  <div class="dropdown">
                    <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="bulkActionsDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                      Bulk Actions
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="bulkActionsDropdown">
                      <li><a class="dropdown-item" href="#" id="bulkActivateBtn">Activate Selected</a></li>
                      <li><a class="dropdown-item" href="#" id="bulkDeactivateBtn">Deactivate Selected</a></li>
                      <li><a class="dropdown-item" href="#" id="bulkDeleteBtn">Delete Selected</a></li>
                      <li><a class="dropdown-item" href="#" id="bulkExportBtn">Export Selected</a></li>
                    </ul>
                  </div>
                  <div class="dropdown">
                    <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="columnsDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                      Columns
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="columnsDropdown">
                      <li><a class="dropdown-item" href="#" data-column="name">Name</a></li>
                      <li><a class="dropdown-item" href="#" data-column="phone">Phone</a></li>
                      <li><a class="dropdown-item" href="#" data-column="email">Email</a></li>
                      <li><a class="dropdown-item" href="#" data-column="code">Customer Code</a></li>
                      <li><a class="dropdown-item" href="#" data-column="visits">Total Visits</a></li>
                      <li><a class="dropdown-item" href="#" data-column="spent">Total Spent</a></li>
                      <li><a class="dropdown-item" href="#" data-column="lastVisit">Last Visit</a></li>
                      <li><a class="dropdown-item" href="#" data-column="status">Status</a></li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="table-responsive">
                <table class="table table-hover" id="customerTable">
                  <thead>
                    <tr>
                      <th scope="col" style="width: 40px;">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="selectAllCustomers">
                        </div>
                      </th>
                      <th scope="col" class="sortable" data-column="name">Customer Name <i class="fas fa-sort"></i></th>
                      <th scope="col" class="sortable" data-column="phone">Phone <i class="fas fa-sort"></i></th>
                      <th scope="col" class="sortable" data-column="email">Email <i class="fas fa-sort"></i></th>
                      <th scope="col" class="sortable" data-column="code">Customer Code <i class="fas fa-sort"></i></th>
                      <th scope="col" class="sortable" data-column="visits">Total Visits <i class="fas fa-sort"></i></th>
                      <th scope="col" class="sortable" data-column="spent">Total Spent <i class="fas fa-sort"></i></th>
                      <th scope="col" class="sortable" data-column="lastVisit">Last Visit <i class="fas fa-sort"></i></th>
                      <th scope="col" class="sortable" data-column="status">Status <i class="fas fa-sort"></i></th>
                      <th scope="col">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="customerTableBody">
                    <!-- Customer data will be loaded here -->
                  </tbody>
                </table>
              </div>
              <div class="d-flex justify-content-between align-items-center mt-3">
                <div>
                  <span id="showingRecords">Showing 0 to 0 of 0 entries</span>
                </div>
                <div>
                  <nav aria-label="Customer table pagination">
                    <ul class="pagination" id="customerTablePagination">
                      <!-- Pagination will be loaded here -->
                    </ul>
                  </nav>
                </div>
              </div>
            </div>
          </div>
          <!-- Container-fluid Ends-->
        </div>
        <!-- footer start-->
        <footer class="footer">
          <div class="container-fluid">
            <div class="row">
              <div class="col-md-12 footer-copyright text-center">
                <p class="mb-0">Copyright 2024 Â© Tracking System All rights reserved.</p>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>
    
    <!-- Customer Detail Modal -->
    <div class="modal fade customer-detail-modal" id="customerDetailModal" tabindex="-1" aria-labelledby="customerDetailModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="customerDetailModalLabel">Customer Details</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" id="customerDetailModalBody">
            <!-- Customer details will be loaded here -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="editCustomerBtn">Edit Customer</button>
            <button type="button" class="btn btn-success" id="createOrderForCustomerBtn">Create Order</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Delete Confirmation Modal -->
    <div class="modal fade" id="deleteConfirmationModal" tabindex="-1" aria-labelledby="deleteConfirmationModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="deleteConfirmationModalLabel">Confirm Delete</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>Are you sure you want to delete this customer? This action cannot be undone.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- latest jquery-->
    <script src="../assets/js/jquery.min.js"></script>
    <!-- Bootstrap js-->
    <script src="../assets/js/bootstrap/bootstrap.bundle.min.js"></script>
    <!-- feather icon js-->
    <script src="../assets/js/icons/feather-icon/feather.min.js"></script>
    <script src="../assets/js/icons/feather-icon/feather-icon.js"></script>
    <!-- scrollbar js-->
    <script src="../assets/js/scrollbar/simplebar.js"></script>
    <script src="../assets/js/scrollbar/custom.js"></script>
    <!-- Sidebar jquery-->
    <script src="../assets/js/config.js"></script>
    <!-- Plugins JS start-->
    <script src="../assets/js/sidebar-menu.js"></script>
    <script src="../assets/js/sidebar-pin.js"></script>
    <script src="../assets/js/slick/slick.min.js"></script>
    <script src="../assets/js/slick/slick.js"></script>
    <script src="../assets/js/header-slick.js"></script>
    <script src="../assets/js/datatable/datatables/jquery.dataTables.min.js"></script>
    <script src="../assets/js/datatable/datatables/datatable.custom.js"></script>
    <!-- Plugins JS Ends-->
    <!-- Theme js-->
    <script src="../assets/js/script.js"></script>
    <!-- Tracking System Core -->
    <script src="tracking-system.js"></script>
    <!-- Error Handling Utilities -->
    <script src="error-handling.js"></script>
    <!-- Customer List Page Script -->
    <script>
      // Initialize customer list page
      $(document).ready(function() {
        try {
          // Initialize feather icons
          if (typeof feather !== 'undefined') {
            feather.replace();
          }
          
          // Initialize tracking system
          if (typeof TrackingSystem !== 'undefined') {
            TrackingSystem.init({
              debug: true
            });
          }
          
          // Initialize customer list functionality
          initializeCustomerList();
          
          // Load customer statistics
          loadCustomerStatistics();
          
          // Load customer data
          loadCustomerData();
        } catch (error) {
          console.error('Failed to initialize customer list page:', error);
          showUserMessage('Failed to initialize page, please refresh', 'error');
        }
      });
      
      // Customer list functionality
      function initializeCustomerList() {
        // Current page and pagination
        let currentPage = 1;
        const itemsPerPage = 10;
        let totalItems = 0;
        let filteredCustomers = [];
        let selectedCustomers = new Set();
        let sortColumn = 'name';
        let sortDirection = 'asc';
        let visibleColumns = new Set(['name', 'phone', 'email', 'code', 'visits', 'spent', 'lastVisit', 'status']);
        
        // Search customer button click
        document.getElementById('searchCustomerBtn').addEventListener('click', function() {
          applyFilters();
        });
        
        // Search customer input enter key
        document.getElementById('searchCustomer').addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            applyFilters();
          }
        });
        
        // Apply filters button click
        document.getElementById('applyFiltersBtn').addEventListener('click', function() {
          applyFilters();
        });
        
        // Reset filters button click
        document.getElementById('resetFiltersBtn').addEventListener('click', function() {
          resetFilters();
        });
        
        // Select all customers checkbox
        document.getElementById('selectAllCustomers').addEventListener('change', function() {
          const isChecked = this.checked;
          const customerCheckboxes = document.querySelectorAll('.customer-checkbox');
          
          customerCheckboxes.forEach(checkbox => {
            checkbox.checked = isChecked;
            const customerId = checkbox.dataset.customerId;
            
            if (isChecked) {
              selectedCustomers.add(customerId);
            } else {
              selectedCustomers.delete(customerId);
            }
          });
          
          updateBulkActionsButton();
        });
        
        // Column visibility dropdown
        document.querySelectorAll('#columnsDropdown .dropdown-item').forEach(item => {
          item.addEventListener('click', function(e) {
            e.preventDefault();
            
            const column = this.dataset.column;
            const columnIndex = getColumnIndex(column);
            
            if (visibleColumns.has(column)) {
              visibleColumns.delete(column);
              this.classList.remove('active');
              $(`#customerTable th:nth-child(${columnIndex + 1}), #customerTable td:nth-child(${columnIndex + 1})`).hide();
            } else {
              visibleColumns.add(column);
              this.classList.add('active');
              $(`#customerTable th:nth-child(${columnIndex + 1}), #customerTable td:nth-child(${columnIndex + 1})`).show();
            }
          });
        });
        
        // Sortable columns
        document.querySelectorAll('.sortable').forEach(header => {
          header.addEventListener('click', function() {
            const column = this.dataset.column;
            
            if (sortColumn === column) {
              sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
            } else {
              sortColumn = column;
              sortDirection = 'asc';
            }
            
            // Update sort icons
            document.querySelectorAll('.sortable i').forEach(icon => {
              icon.className = 'fas fa-sort';
            });
            
            const sortIcon = this.querySelector('i');
            sortIcon.className = sortDirection === 'asc' ? 'fas fa-sort-up' : 'fas fa-sort-down';
            
            // Sort and reload data
            sortCustomerData();
            renderCustomerTable();
          });
        });
        
        // Bulk actions
        document.getElementById('bulkActivateBtn').addEventListener('click', function() {
          bulkUpdateCustomerStatus('active');
        });
        
        document.getElementById('bulkDeactivateBtn').addEventListener('click', function() {
          bulkUpdateCustomerStatus('inactive');
        });
        
        document.getElementById('bulkDeleteBtn').addEventListener('click', function() {
          if (confirm('Are you sure you want to delete the selected customers? This action cannot be undone.')) {
            bulkDeleteCustomers();
          }
        });
        
        document.getElementById('bulkExportBtn').addEventListener('click', function() {
          bulkExportCustomers();
        });
        
        // Edit customer button in modal
        document.getElementById('editCustomerBtn').addEventListener('click', function() {
          const customerId = this.dataset.customerId;
          window.location.href = `customer-edit.html?id=${customerId}`;
        });
        
        // Create order for customer button in modal
        document.getElementById('createOrderForCustomerBtn').addEventListener('click', function() {
          const customerId = this.dataset.customerId;
          window.location.href = `order-create.html?customerId=${customerId}`;
        });
        
        // Confirm delete button
        document.getElementById('confirmDeleteBtn').addEventListener('click', function() {
          const customerId = this.dataset.customerId;
          deleteCustomer(customerId);
          
          // Close modal
          const deleteModal = bootstrap.Modal.getInstance(document.getElementById('deleteConfirmationModal'));
          deleteModal.hide();
        });
        
        // Function to get column index
        function getColumnIndex(column) {
          const columns = ['select', 'name', 'phone', 'email', 'code', 'visits', 'spent', 'lastVisit', 'status', 'actions'];
          return columns.indexOf(column);
        }
        
        // Function to apply filters
        function applyFilters() {
          const searchTerm = document.getElementById('searchCustomer').value.trim().toLowerCase();
          const statusFilter = document.getElementById('filterStatus').value;
          const customerTypeFilter = document.getElementById('filterCustomerType').value;
          const dateRangeFilter = document.getElementById('filterDateRange').value;
          
          // This would be an actual API call in a real implementation
          // For demo purposes, we'll filter the mock data
          filteredCustomers = mockCustomers.filter(customer => {
            // Search filter
            if (searchTerm && 
                !customer.name.toLowerCase().includes(searchTerm) && 
                !customer.email.toLowerCase().includes(searchTerm) && 
                !customer.phone.includes(searchTerm)) {
              return false;
            }
            
            // Status filter
            if (statusFilter && customer.status !== statusFilter) {
              return false;
            }
            
            // Customer type filter
            if (customerTypeFilter && customer.customerType !== customerTypeFilter) {
              return false;
            }
            
            // Date range filter
            if (dateRangeFilter) {
              const customerDate = new Date(customer.registrationDate);
              const now = new Date();
              
              switch (dateRangeFilter) {
                case 'today':
                  if (customerDate.toDateString() !== now.toDateString()) {
                    return false;
                  }
                  break;
                case 'week':
                  const weekAgo = new Date(now);
                  weekAgo.setDate(weekAgo.getDate() - 7);
                  if (customerDate < weekAgo) {
                    return false;
                  }
                  break;
                case 'month':
                  const monthAgo = new Date(now);
                  monthAgo.setMonth(monthAgo.getMonth() - 1);
                  if (customerDate < monthAgo) {
                    return false;
                  }
                  break;
                case 'year':
                  const yearAgo = new Date(now);
                  yearAgo.setFullYear(yearAgo.getFullYear() - 1);
                  if (customerDate < yearAgo) {
                    return false;
                  }
                  break;
              }
            }
            
            return true;
          });
          
          // Reset to first page
          currentPage = 1;
          
          // Sort and render data
          sortCustomerData();
          renderCustomerTable();
        }
        
        // Function to reset filters
        function resetFilters() {
          document.getElementById('searchCustomer').value = '';
          document.getElementById('filterStatus').value = '';
          document.getElementById('filterCustomerType').value = '';
          document.getElementById('filterDateRange').value = '';
          
          // Reset filtered customers to all customers
          filteredCustomers = [...mockCustomers];
          
          // Reset to first page
          currentPage = 1;
          
          // Sort and render data
          sortCustomerData();
          renderCustomerTable();
        }
        
        // Function to sort customer data
        function sortCustomerData() {
          filteredCustomers.sort((a, b) => {
            let valueA = a[sortColumn];
            let valueB = b[sortColumn];
            
            // Handle special cases
            if (sortColumn === 'spent') {
              valueA = parseFloat(valueA.replace('$', '').replace(',', ''));
              valueB = parseFloat(valueB.replace('$', '').replace(',', ''));
            } else if (sortColumn === 'lastVisit') {
              valueA = new Date(valueA);
              valueB = new Date(valueB);
            } else if (typeof valueA === 'string') {
              valueA = valueA.toLowerCase();
              valueB = valueB.toLowerCase();
            }
            
            if (valueA < valueB) {
              return sortDirection === 'asc' ? -1 : 1;
            }
            if (valueA > valueB) {
              return sortDirection === 'asc' ? 1 : -1;
            }
            return 0;
          });
        }
        
        // Function to render customer table
        function renderCustomerTable() {
          const tableBody = document.getElementById('customerTableBody');
          const showingRecords = document.getElementById('showingRecords');
          const pagination = document.getElementById('customerTablePagination');
          
          // Calculate pagination
          const startIndex = (currentPage - 1) * itemsPerPage;
          const endIndex = Math.min(startIndex + itemsPerPage, filteredCustomers.length);
          const pageCustomers = filteredCustomers.slice(startIndex, endIndex);
          
          // Clear table body
          tableBody.innerHTML = '';
          
          // Render customer rows
          if (pageCustomers.length === 0) {
            tableBody.innerHTML = `
              <tr>
                <td colspan="10" class="text-center py-4">
                  <i data-feather="users" style="width: 48px; height: 48px;"></i>
                  <p class="mt-2">No customers found</p>
                </td>
              </tr>
            `;
          } else {
            pageCustomers.forEach(customer => {
              const row = document.createElement('tr');
              row.innerHTML = `
                <td>
                  <div class="form-check">
                    <input class="form-check-input customer-checkbox" type="checkbox" data-customer-id="${customer.id}">
                  </div>
                </td>
                <td>${customer.name}</td>
                <td>${customer.phone}</td>
                <td>${customer.email}</td>
                <td>${customer.code}</td>
                <td>${customer.visits}</td>
                <td>${customer.spent}</td>
                <td>${customer.lastVisit}</td>
                <td><span class="status-badge status-${customer.status}">${customer.status.charAt(0).toUpperCase() + customer.status.slice(1)}</span></td>
                <td>
                  <div class="action-buttons">
                    <button class="btn btn-sm btn-outline-primary view-customer-btn" data-customer-id="${customer.id}" title="View Details">
                      <i data-feather="eye"></i>
                    </button>
                    <button class="btn btn-sm btn-outline-secondary edit-customer-btn" data-customer-id="${customer.id}" title="Edit">
                      <i data-feather="edit"></i>
                    </button>
                    <button class="btn btn-sm btn-outline-danger delete-customer-btn" data-customer-id="${customer.id}" title="Delete">
                      <i data-feather="trash-2"></i>
                    </button>
                  </div>
                </td>
              `;
              
              tableBody.appendChild(row);
            });
          }
          
          // Add event listeners to action buttons
          document.querySelectorAll('.view-customer-btn').forEach(btn => {
            btn.addEventListener('click', function() {
              const customerId = this.dataset.customerId;
              viewCustomerDetails(customerId);
            });
          });
          
          document.querySelectorAll('.edit-customer-btn').forEach(btn => {
            btn.addEventListener('click', function() {
              const customerId = this.dataset.customerId;
              window.location.href = `customer-edit.html?id=${customerId}`;
            });
          });
          
          document.querySelectorAll('.delete-customer-btn').forEach(btn => {
            btn.addEventListener('click', function() {
              const customerId = this.dataset.customerId;
              showDeleteConfirmation(customerId);
            });
          });
          
          document.querySelectorAll('.customer-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
              const customerId = this.dataset.customerId;
              
              if (this.checked) {
                selectedCustomers.add(customerId);
              } else {
                selectedCustomers.delete(customerId);
              }
              
              // Update select all checkbox
              const allCheckboxes = document.querySelectorAll('.customer-checkbox');
              const checkedCheckboxes = document.querySelectorAll('.customer-checkbox:checked');
              
              document.getElementById('selectAllCustomers').checked = allCheckboxes.length === checkedCheckboxes.length;
              document.getElementById('selectAllCustomers').indeterminate = checkedCheckboxes.length > 0 && checkedCheckboxes.length < allCheckboxes.length;
              
              updateBulkActionsButton();
            });
          });
          
          // Update showing records text
          showingRecords.textContent = `Showing ${startIndex + 1} to ${endIndex} of ${filteredCustomers.length} entries`;
          
          // Render pagination
          renderPagination();
          
          // Initialize feather icons
          if (typeof feather !== 'undefined') {
            feather.replace();
          }
        }
        
        // Function to render pagination
        function renderPagination() {
          const pagination = document.getElementById('customerTablePagination');
          const totalPages = Math.ceil(filteredCustomers.length / itemsPerPage);
          
          // Clear pagination
          pagination.innerHTML = '';
          
          // Previous button
          const prevLi = document.createElement('li');
          prevLi.className = `page-item ${currentPage === 1 ? 'disabled' : ''}`;
          prevLi.innerHTML = `
            <a class="page-link" href="#" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
            </a>
          `;
          
          prevLi.addEventListener('click', function(e) {
            e.preventDefault();
            if (currentPage > 1) {
              currentPage--;
              renderCustomerTable();
            }
          });
          
          pagination.appendChild(prevLi);
          
          // Page numbers
          const maxVisiblePages = 5;
          let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
          let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
          
          if (endPage - startPage + 1 < maxVisiblePages) {
            startPage = Math.max(1, endPage - maxVisiblePages + 1);
          }
          
          if (startPage > 1) {
            const firstLi = document.createElement('li');
            firstLi.className = 'page-item';
            firstLi.innerHTML = `<a class="page-link" href="#">1</a>`;
            
            firstLi.addEventListener('click', function(e) {
              e.preventDefault();
              currentPage = 1;
              renderCustomerTable();
            });
            
            pagination.appendChild(firstLi);
            
            if (startPage > 2) {
              const ellipsisLi = document.createElement('li');
              ellipsisLi.className = 'page-item disabled';
              ellipsisLi.innerHTML = `<a class="page-link" href="#">...</a>`;
              pagination.appendChild(ellipsisLi);
            }
          }
          
          for (let i = startPage; i <= endPage; i++) {
            const pageLi = document.createElement('li');
            pageLi.className = `page-item ${i === currentPage ? 'active' : ''}`;
            pageLi.innerHTML = `<a class="page-link" href="#">${i}</a>`;
            
            pageLi.addEventListener('click', function(e) {
              e.preventDefault();
              currentPage = i;
              renderCustomerTable();
            });
            
            pagination.appendChild(pageLi);
          }
          
          if (endPage < totalPages) {
            if (endPage < totalPages - 1) {
              const ellipsisLi = document.createElement('li');
              ellipsisLi.className = 'page-item disabled';
              ellipsisLi.innerHTML = `<a class="page-link" href="#">...</a>`;
              pagination.appendChild(ellipsisLi);
            }
            
            const lastLi = document.createElement('li');
            lastLi.className = 'page-item';
            lastLi.innerHTML = `<a class="page-link" href="#">${totalPages}</a>`;
            
            lastLi.addEventListener('click', function(e) {
              e.preventDefault();
              currentPage = totalPages;
              renderCustomerTable();
            });
            
            pagination.appendChild(lastLi);
          }
          
          // Next button
          const nextLi = document.createElement('li');
          nextLi.className = `page-item ${currentPage === totalPages ? 'disabled' : ''}`;
          nextLi.innerHTML = `
            <a class="page-link" href="#" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
            </a>
          `;
          
          nextLi.addEventListener('click', function(e) {
            e.preventDefault();
            if (currentPage < totalPages) {
              currentPage++;
              renderCustomerTable();
            }
          });
          
          pagination.appendChild(nextLi);
        }
        
        // Function to update bulk actions button
        function updateBulkActionsButton() {
          const bulkActionsDropdown = document.getElementById('bulkActionsDropdown');
          
          if (selectedCustomers.size > 0) {
            bulkActionsDropdown.disabled = false;
            bulkActions
